<div class="d-sm-flex align-items-center justify-content-between mb-4" *ngIf="this.person">
    <h1 class="h3 mb-0 text-gray-800" *ngIf="isAdmin; else noAdmin">
        <a [routerLink]="['/home']">Panel de control</a> ->
        <a [routerLink]="['/home/records']">Pacientes</a> -> {{ this.person.name }} {{ this.person.lastName }} {{ this.person.secondLastName}}
    </h1>
    <ng-template #noAdmin>
        <h1 class="h3 mb-0 text-gray-800">
            <a [routerLink]="['/home']">Consultorio</a> ->
            <a [routerLink]="['/home/therapist-records', this.userDetails.therapistId, this.userDetails.userId]">Mis pacientes</a> -> {{ this.person.name }} {{ this.person.lastName }} {{ this.person.secondLastName}}
        </h1>
    </ng-template>
</div>
<div class="container-fluid emp-profile">
    <form method="post">
        <div class="row">
            <div class="col-md-3">
                <div *ngIf="this.person">
                    <app-profile-photo [personId]="this.person.id" [isAdmin]="isAdmin"></app-profile-photo>
                </div>
                <div class="profile-work" *ngIf="this.person">
                    <h5 class="mb-3">Información personal</h5>
                    <h6><b>Nombre: </b>{{ this.person.name }}</h6><br/>
                    <h6><b>Apellido P: </b>{{ this.person.lastName }}</h6><br/>
                    <h6><b>Apellido M: </b>{{ this.person.secondLastName }}</h6><br/>
                    <h6><b>Teléfono: </b>{{ this.person.phone }}</h6><br/>
                    <h6><b>Correo: </b>{{ this.person.email }}</h6><br/>
                    <!-- <h6><b>Estado del paciente: </b>{{ this.person.active ? 'Activo' : 'Inactivo' }}</h6><br/> -->
                    <!-- <h6><b>Estado: </b>Logica para estado del expediente "en CURSO"</h6><br/> -->
                </div>
            </div>
            <div class="col-md-9">
                <div class="profile-head" *ngIf="this.person">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Expediente</a>
                        </li>
                        <li *ngIf="this.record" class="nav-item">
                            <a class="nav-link" id="genogram-tab" data-toggle="tab" href="#genogram" role="tab" aria-controls="genogram" aria-selected="false">Genograma</a>
                        </li>
                        <li *ngIf="this.record" class="nav-item">
                            <a class="nav-link" id="sessions-tab" data-toggle="tab" href="#sessions" role="tab" aria-controls="sessions" aria-selected="false">Reportes de sesión</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="attachments-tab" data-toggle="tab" href="#attachments" role="tab" aria-controls="attachments" aria-selected="false">Archivos adjuntos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="tests-tab" data-toggle="tab" href="#tests" role="tab" aria-controls="tests" aria-selected="false">Pruebas</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="dates-tab" data-toggle="tab" href="#dates" role="tab" aria-controls="dates" aria-selected="false">Citas</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="privacy-agreement-tab" data-toggle="tab" href="#privacy-agreement" role="tab" aria-controls="privacy-agreement" aria-selected="false">Acuerdo de privacidad</a>
                        </li>
                    </ul>
                </div>
                <!-- HERE STARTS THE MENUS -->
                <div class="col-md-12">
                    <div class="tab-content profile-tab" id="myTabContent">
                        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                            <ng-container *ngIf="this.person">
                                <app-record-information [personId]="this.person.id"></app-record-information>
                            </ng-container>
                        </div>
                        <div class="tab-pane fade" id="genogram" role="tabpanel" aria-labelledby="genogram-tab">
                            <ng-container *ngIf="this.record !== null && this.record !== undefined">
                                <app-genogram [recordId]="this.record.id" [isAdmin]="this.isAdmin"></app-genogram>
                            </ng-container>
                        </div>
                        <div class="tab-pane fade" id="sessions" role="tabpanel" aria-labelledby="sessions-tab">
                            <ng-container *ngIf="this.record !== null && this.record !== undefined">
                                <app-list-session [recordId]="this.record.id" [personId]="this.person.id"></app-list-session>
                            </ng-container>
                        </div>
                        <div class="tab-pane fade" id="attachments" role="tabpanel" aria-labelledby="attachments-tab">
                            <ng-container *ngIf="this.person">
                                <app-attachments [personId]="this.person.id"></app-attachments>
                            </ng-container>
                        </div>
                        <div class="tab-pane fade" id="tests" role="tabpanel" aria-labelledby="tests-tab">
                            <p>pruebas</p>
                        </div>
                        <div class="tab-pane fade" id="dates" role="tabpanel" aria-labelledby="dates-tab">
                            <p>Citas</p>
                        </div>
                        <div class="tab-pane fade" id="privacy-agreement" role="tabpanel" aria-labelledby="privacy-agreement-tab">
                            <div class="col-md-6">
                                <button (click)="viewPrivacyAgreement()" class="btn btn-success btn-icon-split">
                                        <span class="icon text-white-50">
                                            <i class="fas fa-check"></i>
                                         </span>
                                     <span class="text">Acuerdo de privacidad</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <!-- <div class="col-md-1">
                <input type="submit" class="profile-edit-btn" name="btnAddMore" value="Edit Profile" />
            </div> -->
        </div>
        <div class="row">


        </div>
    </form>
</div>